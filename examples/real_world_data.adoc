= Exploring real world data for clinical trials with InferenceQL

Show me 5 rows from the data

[source,iql]
----
SELECT * FROM data LIMIT 5
----

Show me patients whose survival time is lower than expected given ecog performance and psa levels

[source,iql]
----
SELECT * FROM 
  SELECT 
    PROBABILITY OF log_time_to_outcome > log_time_to_outcome
      UNDER model
        GIVEN ecog_performance_status, log_psa_baseline
      AS probability_shorter_survival,
    education,
    race_ethnicity
    FROM 
    SELECT * FROM data
WHERE probability_shorter_survival > 0.5
----

Show me patients' survival time, education, and probable survival time given education

[source,iql]
----
SELECT 
	log_time_to_outcome, 
	education,
	PROBABILITY OF log_time_to_outcome
		UNDER model
		GIVEN education
	AS predicted_survival_time
FROM SELECT * FROM data
----

Whatâ€™s the median probability that patients of each education level have lower survival times than expected given ecog performance and psa levels?
Order by highest probability

[source,iql]
----
SELECT MEDIAN(probability_shorter_survival) as median_probability_shorter_survival
SELECT 
    PROBABILITY OF log_time_to_outcome > log_time_to_outcome
      UNDER model
        GIVEN ecog_performance_status, log_psa_baseline
      AS probability_shorter_survival,
	education
	FROM
	SELECT * FROM data
)
GROUP BY education
ORDER BY median_probability_shorter_survival DESC
----

Poststratify to general US population using claims data

[source,iql]
----
SELECT * FROM
    GENERATE 
        log_time_to_outcome, health_outcome
      UNDER model
        GIVEN age, education, region, employment_status,
            insurance_coverage, log_total_healthcare_expenditure
	FROM
	SELECT * FROM poststrat_data
)
----