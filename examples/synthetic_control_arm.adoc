= Clinical trials synthetic control arm with InferenceQL

Show me 5 rows from the data

[source,iql]
----
SELECT * FROM data LIMIT 5
----

Look at the clinical trial's population distribution

[source,iql]
----
SELECT
    log_time,
    agegrp,
    stage
FROM data
----

How well does the model capture that distribution?

[source,iql]
----
SELECT * FROM
  GENERATE
    log_time,
    agegrp,
    stage
  UNDER model
LIMIT 1000
----

We run a new experiment, and are interested in using the previous experiment's
control arm to create a synthetic control for it. Looking at the ground truth
control though, we can see its population has a significantly different distribution
to that of the previous experiment.


[source,iql]
----
SELECT
    log_time,
    agegrp,
    stage
FROM new_data
----

Poststratify

[source,iql]
----
SELECT * FROM
    GENERATE 
        log_time, censored
      UNDER model
        GIVEN gleason_grade, stage, log_bilirubin, log_ast, log_alt, log_psa, agegrp
	FROM
	SELECT * FROM new_data
)
----